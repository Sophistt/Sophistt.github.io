<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Self-driving Hardware and Software Architectures | DeepSpace</title><meta name="keywords" content="??"><meta name="author" content="Carlos"><meta name="copyright" content="Carlos"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="本篇为多伦多大学的自动驾驶车辆课程中的第二周课程笔记，涉及到自动驾驶车辆的软硬件设计。 Sensors and Computer Hardware Sensors 传感器(Sensors)作为检测外界和车辆自身情况的硬件，在无人驾驶车辆中是必不可少的。传感器可以根据其感知数据范围的不同分为两类：  Exteroceptive：extero &#x3D; surroundings proprioceptive">
<meta property="og:type" content="article">
<meta property="og:title" content="Self-driving Hardware and Software Architectures">
<meta property="og:url" content="http://sophistt.github.io/2019/09/24/self-driving-hardware-and-software/index.html">
<meta property="og:site_name" content="DeepSpace">
<meta property="og:description" content="本篇为多伦多大学的自动驾驶车辆课程中的第二周课程笔记，涉及到自动驾驶车辆的软硬件设计。 Sensors and Computer Hardware Sensors 传感器(Sensors)作为检测外界和车辆自身情况的硬件，在无人驾驶车辆中是必不可少的。传感器可以根据其感知数据范围的不同分为两类：  Exteroceptive：extero &#x3D; surroundings proprioceptive">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2020/07/18/gxnJzBQKNyFeYp5.png">
<meta property="article:published_time" content="2019-09-24T14:02:34.000Z">
<meta property="article:modified_time" content="2021-03-03T08:27:46.807Z">
<meta property="article:author" content="Carlos">
<meta property="article:tag" content="??">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/07/18/gxnJzBQKNyFeYp5.png"><link rel="shortcut icon" href="/static/favicon.ico"><link rel="canonical" href="http://sophistt.github.io/2019/09/24/self-driving-hardware-and-software/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '4.2.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-03-03 08:27:46'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'true'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><link rel="stylesheet" href="/static/atom-one-light.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="/static/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">44</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">16</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-gamepad"></i><span> Entertainment</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fas fa-camera"></i><span> Photo</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#sensors-and-computer-hardware"><span class="toc-number">1.</span> <span class="toc-text">Sensors and Computer Hardware</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#sensors"><span class="toc-number">1.1.</span> <span class="toc-text">Sensors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#摄像机"><span class="toc-number">1.1.1.</span> <span class="toc-text">摄像机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#激光雷达"><span class="toc-number">1.1.2.</span> <span class="toc-text">激光雷达</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#毫米波雷达"><span class="toc-number">1.1.3.</span> <span class="toc-text">毫米波雷达</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#超声波雷达"><span class="toc-number">1.1.4.</span> <span class="toc-text">超声波雷达</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定位模块"><span class="toc-number">1.1.5.</span> <span class="toc-text">定位模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#轮速计"><span class="toc-number">1.1.6.</span> <span class="toc-text">轮速计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#computing-hardware"><span class="toc-number">1.2.</span> <span class="toc-text">Computing Hardware</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#hardware-configuration-design"><span class="toc-number">2.</span> <span class="toc-text">Hardware Configuration Design</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#需求分析"><span class="toc-number">2.1.</span> <span class="toc-text">需求分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#高速道路行驶"><span class="toc-number">2.1.1.</span> <span class="toc-text">高速道路行驶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#城市道路行驶"><span class="toc-number">2.2.</span> <span class="toc-text">城市道路行驶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#传感器布置图"><span class="toc-number">2.2.1.</span> <span class="toc-text">传感器布置图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#software-architecture"><span class="toc-number">3.</span> <span class="toc-text">Software Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#环境感知"><span class="toc-number">3.1.</span> <span class="toc-text">环境感知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境匹配"><span class="toc-number">3.2.</span> <span class="toc-text">环境匹配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动作规划"><span class="toc-number">3.3.</span> <span class="toc-text">动作规划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#系统监察"><span class="toc-number">3.4.</span> <span class="toc-text">系统监察</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#environment-representation"><span class="toc-number">4.</span> <span class="toc-text">Environment Representation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#references"><span class="toc-number">5.</span> <span class="toc-text">References</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/07/18/gxnJzBQKNyFeYp5.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">DeepSpace</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-gamepad"></i><span> Entertainment</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/photos/"><i class="fa-fw fas fa-camera"></i><span> Photo</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Self-driving Hardware and Software Architectures</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2019-09-24T14:02:34.000Z" title="Created 2019-09-24 14:02:34">2019-09-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-03-03T08:27:46.807Z" title="Updated 2021-03-03 08:27:46">2021-03-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Study/">Study</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Study/Autonomous-Driving/">Autonomous Driving</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">1.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>3min</span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>本篇为多伦多大学的自动驾驶车辆课程中的第二周课程笔记，涉及到自动驾驶车辆的软硬件设计。</p>
<h1 id="sensors-and-computer-hardware">Sensors and Computer Hardware</h1>
<h2 id="sensors">Sensors</h2>
<p>传感器(Sensors)作为检测外界和车辆自身情况的硬件，在无人驾驶车辆中是必不可少的。传感器可以根据其感知数据范围的不同分为两类：</p>
<ul>
<li><strong>Exteroceptive</strong>：extero = surroundings</li>
<li><strong>proprioceptive</strong>：proprio = internal</li>
</ul>
<h3 id="摄像机">摄像机</h3>
<p>摄像机(Camera)作为感知外界环境的核心，主要有以下3个评价指标(Comparison metrics):</p>
<ul>
<li><strong>分辨率(Resolution)</strong>：分辨率影响摄像机的清晰度，分辨率越高，则可以观察到的物体细节越多</li>
<li><strong>视场角(Field of View)</strong>：视场角顾名思义为摄像头可以观察到的范围</li>
<li><strong>动态范围(Dynamic Range)</strong>：动态范围指的是摄像头从黑暗到明亮环境时的成像调节能力</li>
</ul>
<p>有的摄像机通过两个镜头加上融合算法处理，可以得到深度信息，被称作双目摄像机，得到出来的图像除了三个颜色通道外(RGB)， 还有一个通道存储深度信息(Depth)。</p>
<h3 id="激光雷达">激光雷达</h3>
<p>激光雷达(Lidar)在无人驾驶车辆中也得到很好的应用，通过测量激光反射的强度和时间形成的激光点云(Point Cloud)数据可以很好的反映周围环境的几何信息。 主要的评价指标为：</p>
<ul>
<li><strong>线数(Number of beams)</strong>：线数越多的Lidar，检测物体的精度也越高，常见的线数有8, 16 ,32 ,64</li>
<li><strong>每秒点数(Points per second)</strong>：每秒点数决定了Lidar的检测数率</li>
<li><strong>旋转速率(Rotation Rate)</strong>：旋转速率指的是Lidar旋转一圈所需要的时间</li>
<li><strong>视场角(Field of View)</strong>：视场角为Lidar的上下可观察到的范围</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/yIosdBv.png" alt="激光雷达点云图"/></p>
<h3 id="毫米波雷达">毫米波雷达</h3>
<p>毫米波雷达(Radar)在无人驾驶中主要应用与目标检测和相对速度测量，也分为WFOV(短距)和NFOV(长距)两类：</p>
<ul>
<li><strong>探测范围</strong>：最大的有效检测距离</li>
<li><strong>视场角</strong></li>
<li><strong>检测精度(Accuracy)</strong>：检测精度指的是检测位置(Position)以及速度(Speed)的精度</li>
</ul>
<h3 id="超声波雷达">超声波雷达</h3>
<p>超声波雷达(Ultrasonics)可以提供短距的，全天候下的距离检测，而且不会受到外界光照等条件的影响，是低成本自动泊车解决方案的必备选择， 主要缺点为探测距离短。</p>
<ul>
<li><strong>探测范围</strong></li>
<li><strong>视场角</strong></li>
<li><strong>成本(Cost)</strong></li>
</ul>
<h3 id="定位模块">定位模块</h3>
<p>在无人驾驶车辆中，定位模块由GNSS模块(Global Navigation Satellite Systems)和IMU模块(Inertial Measurement Units)组成, 其中GNSS模块提供车辆的经纬度，航向角信息；IMU模块提供车辆的3轴角速度，角加速度，加速度等信息。</p>
<h3 id="轮速计">轮速计</h3>
<p>轮速计可以通过测量车辆转速与摆角得到较为精确的车辆速度与车辆朝向，也是无人驾驶车辆可以使用的传感器之一。</p>
<h2 id="computing-hardware">Computing Hardware</h2>
<p>当前成熟的，符合车规级的自动驾驶硬件平台并不多，其中最具有代表性的就是 <strong>NVIDIA PX/AGX</strong> 和 <strong>Intel &amp; Mobile EyeQ</strong>。</p>
<p>硬件平台需求： 因为需要实时处理大量来自Lidar，Camera的数据，甚至需要进行深度学习，因此<strong>GPU</strong>和<strong>FPGAs</strong>是其中的核心部件之一。</p>
<h1 id="hardware-configuration-design">Hardware Configuration Design</h1>
<p>在硬件选型以及设计中，核心环节之一是传感器的布置方案。 下面将探讨如何在无人驾驶车辆上布置上文提到的6种传感器，从而保证行车安全。</p>
<h2 id="需求分析">需求分析</h2>
<p>可以将无人驾驶分解为两种基础场景，高速道路行驶以及城市道路行驶：</p>
<h3 id="高速道路行驶">高速道路行驶</h3>
<p>高速道路行驶场景中，无人驾驶车辆主要处理以下三个任务：</p>
<ul>
<li>紧急停车(Emergency Stop)： 假设车速为 120 <em>kmph</em>, 紧急停车制动距离约为 120 <em>meters</em></li>
<li>速度保持(Matain Speed)： 高速行驶中，为了维持车速和保持足够的制动距离，需要和前车保持的距离约为 100 <em>meters</em></li>
<li>变道(Lane Change)： 为了顺利变道，传感器应当探测临近车道及其过去的一个车道，防止变道过程中发生碰撞</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/zIT5QpK.png" alt=">传感器横向探测图"/&gt;</p>
<h2 id="城市道路行驶">城市道路行驶</h2>
<p>城市道路行驶场景中，无人驾驶车辆<strong>不仅需要</strong>关注高速道路行驶的任务，<strong>还需要</strong>关注以下三个额外的任务：</p>
<ul>
<li>绕障(Overtaking)：在绕障过程中，需要的传感器与高速公路场景下的变道相似</li>
<li>转弯，通过路口(Turning, Crossing at Intersections)：通过路口时，自动驾驶车辆不仅需要关注对向车i狼，还需要关注横向来车。</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/IrMhtp4.png" alt="十字路口传感器探测图"/></p>
<ul>
<li>通过环岛(Passing Roundabouts)：因为环岛的特殊性，车辆的速度会比平时更低，同时需要一个视场角更宽的传感器以提高探测效果。</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/yqqkdIU.png" alt="环岛传感器探测范围图"/></p>
<h3 id="传感器布置图">传感器布置图</h3>
<p>结合高速道路驾驶场景与城市道路驾驶场景，自动驾驶车辆传感器布置图的模式如下：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/sF24xcJ.png" alt="传感器总布置图"/></p>
<h1 id="software-architecture">Software Architecture</h1>
<p>自动驾驶汽车的软件基础架构可以分为5大模块，分别为：<strong>环境感知</strong>，<strong>环境匹配</strong>，<strong>动作规划</strong>，<strong>动作控制</strong>，<strong>系统监察</strong>。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/vhDwQc6.png" title="source: imgur.com" alt="自动驾驶软件架构"/></p>
<h2 id="环境感知">环境感知</h2>
<p>环境感知模块需要接收几乎所有的传感器输入，从而完成<strong>自定位</strong>，<strong>动态目标检测</strong>和<strong>静态目标检测</strong>三个功能。</p>
<ul>
<li>自定位：根据 GPS/IMU/Wheel Odometry 等传感器的输入，得到车辆的位置信息</li>
<li>动态目标检测：根据 Lidar/Cameras/Radar 的传感器的输入，不仅需要完成<strong>目标识别</strong>，还需要完成<strong>目标跟踪</strong>和<strong>目标预测</strong>。</li>
<li>静态目标检测：根据 HD Road Map 和 Lidar 的数据，识别出地面标志，Road Signs 等指示标志和路沿等障碍。</li>
</ul>
<h2 id="环境匹配">环境匹配</h2>
<p>环境匹配模块和环境感知模块密切相关，其任务是利用和传感器的数据和环境感知模块的结果，根据已经录制好的高精地图，更精确地匹配出车辆所在位置，得到详细的周边环境信息。 其模块包含3个类型的地图。</p>
<ul>
<li>栅格地图(Occupancy Grid Map)：栅格地图将地图划分为小格，并且将静态障碍物和可通行区域划分为不同的属性，利用该地图可以查询到可通行区域。</li>
<li>定位地图(Localizaiton Map)：定位地图有预先采集到的点云构成，通过将实时扫描到的点云与定位地图进行匹配，可以得到精度极高的自定位信息。</li>
<li>道路地图(Detailed Road Map)：道路地图一般以拓扑图的形式存在，将车道等信息连接起来，通过查询道路地图可以得到从A到B点的最优全局导航路径。</li>
</ul>
<h2 id="动作规划">动作规划</h2>
<p>动作规划模块是环境感知模块的下游，输入环境感知模块的结果，根据当前车辆所处的环境，输出当前时刻的最优轨迹到动作控制模块中。动作规划模块一般有三个子模块构成， 分别是<strong>任务规划</strong>，<strong>行为规划</strong>，<strong>局部轨迹规划</strong>三个模块。</p>
<ul>
<li>任务规划(Mission Planner)：任务规划模块利用当前车辆位置信息和<strong>道路地图</strong>，根据所给出的终点，使用算法得到合理的全局路径</li>
<li>行为规划(Behaviour Planner)：行为规划模块，根据全局导航路径和检测到的动态，静态障碍物，做出合适的行为决策，指导无人驾驶汽车行驶</li>
<li>局部轨迹规划(Local Planner)：局部轨迹规划模块根据行为规划模块的输出结果，根据车辆特性和驾驶舒适性等要求，输出合理的行车轨迹</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="https://i.imgur.com/dpKbzxb.png" title="source: imgur.com" alt="动作决策模块架构图"/></p>
<h2 id="系统监察">系统监察</h2>
<p>系统监察模块主要是利用运行在自动驾驶系统之外的另外一套系统来监听自动驾驶系统的各个模块运行，通讯是否正常，同时监管每个传感器是否正常工作，在传感器或者自动驾驶系统失效的情况下，监察系统需要<strong>发出告警</strong>且退出自动驾驶模式。</p>
<h1 id="environment-representation">Environment Representation</h1>
<p>环境表征主要分为将周围环境分为三个地图，分别为<strong>栅格地图</strong>,<strong>定位地图</strong>和<strong>道路地图</strong>，在前面的<em>环境匹配</em>模块中已经进行过介绍，此处不再赘述，可以在 <strong>Refernces</strong> 的 <em>Environment Representation</em> 进行查看。</p>
<h1 id="references">References</h1>
<ul>
<li><a href="https://d3c33hcgiwev3.cloudfront.net/qOzjLiP0Eem9HA6xGGaRfg_a92f911023f411e9b54e6d5a03316a13_C1M2L1---Sensors-and-Computing-Hardware.pdf?Expires=1569456000&amp;Signature=Rpji2USvyDoqtj1aSkHXWnYHq1D2NIyt6wOf6-Z5YCVSma32WldGhXtmqrqLFE96s8nHAMZ0iuV5A-GsA6mEghxltC~Q~TkGlqTsw1s-7oCBEUKCkDC4CwOvQzl~cCjzu3fv3Jev7aE5Mf-ulltznh6g9De05D~~QP8q~aatO6g_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A" target="_blank" rel="noopener">Sensors and Computer Hardware</a></li>
<li><a href="https://d3c33hcgiwev3.cloudfront.net/rqAg6SP1EemdvRIYWfQePg_aee0846023f511e9ac6401043cf68a79_C1M2L2---Hardware-Configuration-Design.pdf?Expires=1569456000&amp;Signature=DI1Hgzlq4ydcBcdQjf2~zaL2BOx4-X8tP269lLA7TbQjmnXRqutAT2J-3-D394e5bT4fvsOdHBp9etDAP7IVQoJ6FZu72FxfbBz3TheLhXUM6nUqY6o2KkftxNAsGlM5vvUivWe-twYMyjQ8sjvn4t~ccL2zvgDw9YyPqqj6Nx8_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A" target="_blank" rel="noopener">Hardware Configuration Design</a></li>
<li><a href="https://d3c33hcgiwev3.cloudfront.net/SE0ZMCP2EemdvRIYWfQePg_48711bd023f611e9b54e6d5a03316a13_C1M2L3---Autonomous-Vehicle-Software.pdf?Expires=1569628800&amp;Signature=aQ9LzEWYB4gjQJQ8FoX5ZhlBDx8ZDI4DDn5eebnuW7nUPE643iu12DWMMcQ8YTAl6ic1M~3cezgL-zcWqGJLK~~LE7PrZOz~c0L018T33HF63d9xWPASnj8Mb~I3nPacfhwNgJfYvwXhlqsX9Y5A6kJh5zwMVgJ5WnD4Wwjx5rI_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A" target="_blank" rel="noopener">Software Architecture</a></li>
<li><a href="https://d3c33hcgiwev3.cloudfront.net/SE2OYSP2EemdvRIYWfQePg_4881bda023f611e9bdd6579bce97d1d3_C1M2L4---Environment-Representation.pdf?Expires=1569628800&amp;Signature=HqCrkIUjxVVDJu43Ua3Sfhj1yDf6OKxiMBroTbErsdzb-j3nsYJ7qCGnL~5EKxGNEHYnWzA05hIkmKGpeJzJh63uW6gBgErsZdFdG~G1SjNA8TBvM6JprDW6ZZv3DXlBMpmVSQSgY6-22rayhoQN5LiUTvxwF-cCJ-01HTDfsMI_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A" target="_blank" rel="noopener">Environment Representation</a></li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Carlos</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://sophistt.github.io/2019/09/24/self-driving-hardware-and-software/">http://sophistt.github.io/2019/09/24/self-driving-hardware-and-software/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/07/18/gxnJzBQKNyFeYp5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/12/04/pid-controller/"><img class="prev-cover" data-lazy-src="https://i.loli.net/2020/07/18/gxnJzBQKNyFeYp5.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Proportional-Integral-Derivative(PID) Controller</div></div></a></div><div class="next-post pull-right"><a href="/2019/09/11/vim-configuration-of-colorscheme-and-syntax/"><img class="next-cover" data-lazy-src="https://i.loli.net/2020/07/18/xVyet3HZOTaElBi.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">VIM 的主题配色与语法高亮设置</div></div></a></div></nav></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Carlos</div><div class="framework-info"><span>Framework </span><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  var script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div></div></body></html>